To : debian-boot@lists.debian.org
Subject : Re: Bug#854801: Bug#740998: Bug#854801: No network after netinst Stretch RC2
From : Brian Potkin <claremont102@gmail.com>
Date : Fri, 17 Feb 2017 19:19:17 +0000
Message-id : 17022017190020.227160e8099b@desktop.copernicus.org.uk
In-reply-to : <[ðŸ”Ž]Â 41f5253c-b176-1678-1f42-920dec22ed6c@debian.org>
References : <[ðŸ”Ž]Â 20170213234330.GA12890@via.ecp.fr> <[ðŸ”Ž]Â 41f5253c-b176-1678-1f42-920dec22ed6c@debian.org>


On Thu 16 Feb 2017 at 14:10:08 +0100, Bernhard Schmidt wrote:
> On 14.02.2017 00:43, Pierre Ynard wrote:
> 
> Hi,
> 
> >> in finish-install /e/n/i will never be properly populated for a wireless
> >> installation without network-manager, although I think ifupdown would be
> >> capable to do this (not tested, but have a look at
> >> https://anonscm.debian.org/cgit/d-i/netcfg.git/tree/write_interface.c).
> >> I guess the justification is that people using wireless usually would
> >> want a GUI to roam between networks, and a interface stanza would
> >> prevent even a (later installed) network-manager from touching the
> >> interface.
> > 
> > That makes sense. Maybe it could still output commented-out
> > configuration into /e/n/i, to make it easier in case people do end up
> > editing the file to set up their network, for whatever reason.
> 
> We already have several bugs for this behaviour:
> 
> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=694068
> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=727740
> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=777439
> 
> and likely more.
> 
> Users installing with a wireless connection do not have network after
> first boot, unless a -desktop task pulls in network-manager _and_
> network-manager is not blocked by rdnssd.
> 
> I can fix the latter by removing the conflicts and changing the hook
> again to be a no-op if network-manager is installed. But I think a
> proper solution would be to warn the user at the end of the installation
> that he will not have network access after boot and offer to write a
> complete /e/n/i or forcibly install network-manager .
My suggestion for a warning at the end of the installation (if it ever
came about) would be:
  You have chosen to install a bare minimum of Debian over WiFi and
  think the network configuration will be carried over to the installed
  system. We think you are kidding and really want to start again from
  scratch. So that's what you are getting - no connectivity at first
  boot. Good luck. [No, we will not explain the rationale underpinning
  this decision].
I've given up on this and simply preseed to get what I want. 
Forcibly installing network-manager? Why not just give the user what he
wants - a working network?
-- 
Brian.